<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>微信弹1出遮罩</title>
</head>

<body>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }
        
        img {
            max-width: 100%;
            height: auto;
        }
        
        .test {
            height: 600px;
            max-width: 600px;
            font-size: 40px;
        }
    </style>
    <div class="test">

    </div>
    <script type="text/javascript">
        function is_weixin() {
            var ua = navigator.userAgent.toLowerCase();
            if (ua.match(/MicroMessenger/i) == "micromessenger") {
                return true;
            } else {
                return false;
            }
        }
        // 上面的内容是判断是不是微信浏览器
        var isWeixin = is_weixin();
        var winHeight = typeof window.innerHeight != 'undefined' ? window.innerHeight : document.documentElement.clientHeight;
        //? : :三元运算  条件？运行1|运行2   window.innerHeight:获取浏览器窗口的内部高度    document.documentElement.clientHeight
        function loadHtml() {
            var div = document.createElement('div');
            div.id

                = 'weixin-tip';
            div.innerHTML = '<p>1111</p>';
            document.body.appendChild(div);
        } //创建id为weixin-tip的div元素,在其中放入img。

        function loadStyleText(cssText) {
            var style = document.createElement('style');
            style.rel = 'stylesheet';
            style.type = 'text/css';
            try {
                style.appendChild(document.createTextNode(cssText));
            } catch (e) {
                style.styleSheet.cssText = cssText; //ie9以下
            } //try{}catch{}try语句允许我们定义在执行时进行错误测试的代码块。
            // catch 语句允许我们定义当 try 代码块发生错误时，所执行的代码块。
            // finally 语句在 try 和 catch 之后无论有无异常都会执行
            var head = document.getElementsByTagName("head")[0]; //head标签之间加上style样式
            head.appendChild(style);
        }
        var cssText = "#weixin-tip{position: fixed; left:0; top:0; background: rgba(0,0,255,0.8); filter:alpha(opacity=80); width: 100%; height:100%; z-index: 100;} #weixin-tip p{text-align: center; margin-top: 10%; padding:0 5%;}";
        if (isWeixin) {
            loadHtml();
            loadStyleText(cssText);
        }

        function browserRedirect() {
            var sUserAgent = navigator.userAgent.toLowerCase();
            var bIsIpad = sUserAgent.match(/ipad/i) == "ipad";
            var bIsIphoneOs = sUserAgent.match(/iphone os/i) == "iphone os";
            var bIsMidp = sUserAgent.match(/midp/i) == "midp";
            var bIsUc7 = sUserAgent.match(/rv:1.2.3.4/i) == "rv:1.2.3.4";
            var bIsUc = sUserAgent.match(/ucweb/i) == "ucweb";
            var bIsAndroid = sUserAgent.match(/android/i) == "android";
            var bIsCE = sUserAgent.match(/windows ce/i) == "windows ce";
            var bIsWM = sUserAgent.match(/windows mobile/i) == "windows mobile";
            if (bIsIpad || bIsIphoneOs || bIsMidp || bIsUc7 || bIsUc || bIsAndroid || bIsCE || bIsWM) {
                window.location.href = 'http://kk.game719.com/download/kkgame.apk'; //返回当前链接
            } else {
                window.location.href = 'http://kk.game719.com/download/kkgame.apk'; //返回当前链接
            }
        }

        browserRedirect();
    </script>
</body>

</html>